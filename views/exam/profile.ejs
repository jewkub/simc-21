<%
  let radio = new Set([1, 31]);
  let check = new Set([3, 32, 33, 34, 35, 36, 40, 41, 42, 43, 45, 47, 49, 51, 52, 54, 55, ]);
  let text = new Set([2, 4, 6, 7, 8, 9, 11, 12, 13, 14, 15, 16, 17, 18, 20, 21, 22, 23, 24, 25, 26, 28, 29, 30, 37, 38, 39, 44, 46, 48, 50, 53, 56, 57, 58, 59, 60]);
  let select = new Set([5, 27, ]);
  let date = new Set([10]);
  let textarea = new Set([19]);
  let upload = new Set([61, 62]);
%>
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - ค่ายเส้นทางสู่หมอศิริราชครั้งที่ 21</title>
    <link rel="stylesheet" href="/profile-bundle.css">
    <%- include('../includes/css.ejs') %>
    <style>
      @font-face {
        font-family: superspace;
        src: url("/font/superspace/SUPERSPACE BOLD VER 1.00.OTF");
        font-weight: bold;
      }
      @font-face {
        font-family: superspace;
        src: url("/font/superspace/Superspace Regular ver 1.00.ttf");
      }
      * {
        font-family: superspace;
        font-size: large;
      }
      .form-control {
        transition: background-color 0.2s ease;
      }
    </style>
  </head>
  <body>
    <img src="https://storage.googleapis.com/simc-web.appspot.com/public/web/carousel/carousel_201005_0.jpg" width="100%" style="margin-bottom: 20px;">
    <%- include('../includes/pagenav.ejs'); %>
    <br>
    <br>
    <div class="container">
      <form method="post" action="/exam" enctype="multipart/form-data">
        <input type="text" class="form-control" style="display:none;" name="part" value="1">

        <h3 style="text-align: center;">- 01 -<br>Profile</h3>
        
        <div class="form-row form-group">
          <div class="form-check form-check-inline col-auto">
            <input class="form-check-input" type="checkbox" id="check1" name="3">
            <label class="form-check-label" for="check1">
              เคยเข้าค่ายแนะนำคณะแพทยศาสตร์สถาบันอื่น คือ
            </label>
          </div>
          <div class="col-12 col-md">
            <input type="text" class="form-control col-12" name="4">
          </div>
        </div>

        <div class="form-row">
          <label><b><u>ประวัติส่วนตัว</u></b></label>
        </div>
        <div class="form-row">
          <div class="form-group col-12 col-sm-6 form-row">
            <label for="in1" class="col-1 col-sm-2 col-lg-auto col-form-label">ชื่อ</label>
            <select class="form-control col-4 col-md-3 col-xl-2" name="5">
              <option disabled selected value="0">คำนำหน้า</option> <!-- http://bit.ly/2mRVBRD -->
              <option value="ด.ช.">ด.ช.</option>
              <option value="ด.ญ.">ด.ญ.</option>
              <option value="นาย">นาย</option>
              <option value="นางสาว">นางสาว</option>
            </select>
            <div class="col">
              <input type="text" class="form-control" id="in1" name="6" required>
            </div>
          </div>
          <div class="form-group col-12 col-sm form-row">
            <label for="in2" class="col-auto col-form-label">นามสกุล</label>
            <div class="col">
              <input type="text" class="form-control" id="in2" name="7" required>
            </div>
          </div>
        </div>
        <div class="form-row form-group">
          <div class="form-group col-12 col-sm-4 col-md-3 col-xl-2 form-row">
            <label for="in3" class="col-auto col-form-label">ชื่อเล่น</label>
            <div class="col">
              <input type="text" class="form-control" id="in3" name="8" required>
            </div>
          </div>
          <div class="form-group col form-row">
            <label for="in4" class="col-auto col-form-label">เลขประจำตัวประชาชน</label>
            <div class="col col-md-4 col-lg-3">
              <input type="text" class="form-control" id="in4" name="9" required>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="col-8 col-md-5 col-lg-4 col-xl-3 form-row form-group">
            <label for="in5" class="col-3 col-form-label">วันเกิด</label>
            <div class="col">
              <input type="date" class="form-control" id="in5" name="10" required>
            </div>
          </div>
          <div class="col col-md-4 col-lg-2 form-row form-group">
            <label for="in6" class="col-4 col-sm-3 col-md-3 col-lg-3 col-form-label">อายุ</label>
            <div class="col">
              <input type="number" class="form-control" id="in6" min="1" name="11" required>
            </div>
            <label for="in6" class="col-3 col-md-4 col-lg-3 col-form-label">ปี</label>
          </div>
        </div>
        <div class="form-row form-group">
          <label for="in7" class="col-2 col-lg-1 col-form-label">สัญชาติ</label>
          <div class="col col-lg-1">
            <input type="text" class="form-control" id="in7" name="12" required>
          </div>
          <label for="in8" class="col-2 col-lg-1 col-form-label">เชื้อชาติ</label>
          <div class="col col-lg-1">
            <input type="text" class="form-control" id="in8" name="13" required>
          </div>
          <label for="in9" class="col-2 col-lg-1 col-form-label">ศาสนา</label>
          <div class="col col-lg-1">
            <input type="text" class="form-control" id="in9" name="14" required>
          </div>
        </div>
        <div class="form-row form-group">
          <label for="in10" class="col-3 col-xl-2 col-form-label">ปัจจุบันศึกษาอยู่โรงเรียน</label>
          <div class="col-4 col-md-5 col-xl-6">
            <input type="text" class="form-control" id="in10" name="15" required>
          </div>
          <label for="in11" class="col-2 col-md-1 col-form-label">จังหวัด</label>
          <div class="col">
            <input type="text" class="form-control" id="in11" name="16" required>
          </div>
        </div>
        <div class="form-row form-group">
          <label for="in12" class="col-6 col-sm-4 col-xl-3 col-form-label">ระดับชั้นมัธยมศึกษาปีที่</label>
          <div class="col-2">
            <input type="number" class="form-control" id="in12" min="1" max="6" name="17" required>
          </div>
          <label for="in13" class="col-6 col-sm-4 col-form-label">เกรดเฉลี่ยสะสมชั้นมัธยมปลาย</label>
          <div class="col-2 col-md-2">
            <input type="text" class="form-control" id="in13" name="18" required>
          </div>
        </div>
        <div class="form-group">
          <label for="in14" class="col-form-label">ที่อยู่ปัจจุบัน (ที่สามารถติดต่อได้)</label>
          <textarea class="form-control" id="in14" rows="3" name="19" required></textarea>
        </div>
        <div class="form-row form-group">
          <div class="form-group col-12 col-sm-6 form-row">
            <label for="in15" class="col-5 col-sm-6 col-md-5 col-lg-4 col-form-label">เบอร์โทรศัพท์บ้าน</label>
            <div class="col">
              <input type="text" class="form-control" id="in15" name="20" required>
            </div>
          </div>
          <div class="form-group col form-row">
            <label for="in16" class="col-5 col-sm-6 col-md-5 col-lg-4 col-form-label">เบอร์โทรศัพท์มือถือ</label>
            <div class="col">
              <input type="text" class="form-control" id="in16" name="21" required>
            </div>
          </div>
        </div>
        <div class="form-row form-group">
          <div class="form-group col-12 col-sm-6 form-row">
            <label for="in17" class="col-3 col-sm-4 col-lg-3 col-form-label">Facebook</label>
            <div class="col">
              <input type="text" class="form-control" id="in17" name="22" required>
            </div>
          </div>
          <div class="form-group col form-row">
            <label for="in18" class="col-3 col-sm-3 col-lg-2 col-form-label">Email</label>
            <div class="col">
              <input type="email" class="form-control" id="in18" name="23" required>
            </div>
          </div>
        </div>
        <div class="form-row form-group">
          <div class="form-group col-12 col-sm-6 form-row">
            <label for="in19" class="col-4 col-sm-5 col-md-4 col-lg-3 col-form-label">โรคประจำตัว</label>
            <div class="col">
              <input type="text" class="form-control" id="in19" name="24">
            </div>
          </div>
          <div class="form-group col form-row">
            <label for="in20" class="col-4 col-sm-5 col-md-4 col-lg-3 col-form-label">ยาที่ใช้ประจำ</label>
            <div class="col">
              <input type="text" class="form-control" id="in20" name="25">
            </div>
          </div>
        </div>
        <div class="form-row form-group">
          <div class="form-group col form-row">
            <label for="in21" class="col-4 col-sm-2 col-form-label">ประวัติแพ้ยา</label>
            <div class="col">
              <input type="text" class="form-control" id="in21" name="26">
            </div>
          </div>
        </div>
        <div class="form-row form-group">
          <div class="form-group col-12 col-sm-8 col-lg-9 form-row">
            <label for="in22" class="col-3 col-sm-3 col-md-2 col-lg-2 col-form-label">ผู้ปกครอง</label>
            <select class="form-control col-3 col-md-3 col-lg-2" name="27">
              <option disabled selected value="0">คำนำหน้า</option> <!-- http://bit.ly/2mRVBRD -->
              <option value="1">นาย</option>
              <option value="2">นาง</option>
              <option value="3">นางสาว</option>
            </select>
            <div class="col">
              <input type="text" class="form-control" id="in22" name="28" required>
            </div>
          </div>
          <div class="form-group col form-row">
            <label for="in23" class="col-4 col-sm-7 col-md-5 col-lg-5 col-form-label">เกี่ยวข้องเป็น</label>
            <div class="col">
              <input type="text" class="form-control" id="in23" name="29" required>
            </div>
          </div>
        </div>
        <div class="form-row form-group">
          <div class="form-group col-12 col-sm-9 col-md-8 form-row">
            <label for="in24" class="col-5 col-sm-6 col-md-5 col-lg-4 col-xl-3 col-form-label">เบอร์โทรศัพท์ผู้ปกครอง</label>
            <div class="col col-md-6">
              <input type="text" class="form-control" id="in24" name="30" required>
            </div>
          </div>
        </div>
        <div class="form-row">
          <label><b>ประเภทของอาหารที่รับประทาน</b></label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="check2" name="32">
          <label class="form-check-label" for="check2">
            รับประทานอาหารได้ทุกชนิด
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="check3" name="33">
          <label class="form-check-label" for="check3">
            อาหารเจ (ไม่รับประทานเนื้อสัตว์และผลิตภัณฑ์จากไข่และนมวัว)
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="check4" name="34">
          <label class="form-check-label" for="check4">
            อาหารมังสวิรัติ (ไม่รับประทานเนื้อสัตว์ สามารถทานผลิตภัณฑ์จากไข่และนมวัว)
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="check5" name="35">
          <label class="form-check-label" for="check5">
            อาหารมุสลิม (ไม่รับประทานเนื้อหมู)
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="check6" name="36">
          <label class="form-check-label" for="check6">
            มีอาหารที่แพ้ / ทานไม่ได้
          </label>
        </div>
        <div class="form-group form-row">
          <div class="col-1"></div>
          <div class="col form-row">
            <label for="in25" class="col-auto col-form-label">อาหารที่แพ้ (เช่น อาหารทะเล ถั่ว)</label>
            <div class="col">
              <input type="text" class="form-control" id="in25" name="37">
            </div>
          </div>
        </div>
        <div class="form-group form-row">
          <div class="col-1"></div>
          <div class="col form-row">
            <label for="in26" class="col-auto col-form-label">อาหารที่ทานไม่ได้ / ไม่ชอบ</label>
            <div class="col">
              <input type="text" class="form-control" id="in26" name="38">
            </div>
          </div>
        </div>
        <div class="form-group form-row">
          <div class="col-1"></div>
          <div class="col form-row">
            <label for="in27" class="col-auto col-form-label">ข้อยกเว้นอื่น ๆ เกี่ยวกับอาหาร</label>
            <div class="col">
              <input type="text" class="form-control" id="in27" name="39">
            </div>
          </div>
        </div>
        <div class="form-row">
          <label><b>ทราบข่าวโครงการค่ายเส้นทางสู่หมอศิริราชครั้งที่ 21 จากแหล่งใด</b> (ตอบได้มากกว่า 1 ข้อ)</label>
        </div>
        <div class="form-row">
          <div class="form-check form-check-inline col-12 col-md-6 form-group">
            <input class="form-check-input" type="checkbox" id="check7" name="40">
            <label class="form-check-label" for="check7">
              เอกสารประชาสัมพันธ์ที่แจกที่โรงเรียน
            </label>
          </div>
          <div class="form-check form-check-inline col-12 col-md form-group">
            <input class="form-check-input" type="checkbox" id="check8" name="41">
            <label class="form-check-label" for="check8">
              บอร์ดประชาสัมพันธ์ภายในโรงเรียน
            </label>
          </div>
        </div>
        <div class="form-row">
          <div class="form-check form-check-inline col-12 col-md-6 form-group">
            <input class="form-check-input" type="checkbox" id="check9" name="42">
            <label class="form-check-label" for="check9">
              Roadshow ที่โรงเรียน
            </label>
          </div>
          <div class="form-check form-check-inline col-12 col-md form-group">
            <input class="form-check-input" type="checkbox" id="check10" name="43">
            <label class="form-check-label" for="check10">
              โรงเรียนกวดวิชา
            </label>
            <div class="col">
              <input type="text" class="form-control" name="44">
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-check form-check-inline col-12 col-md-6 form-group">
            <input class="form-check-input" type="checkbox" id="check11" name="45">
            <label class="form-check-label" for="check11">
              โทรทัศน์
            </label>
            <div class="col">
              <input type="text" class="form-control" name="46">
            </div>
          </div>
          <div class="form-check form-check-inline col-12 col-md form-group">
            <input class="form-check-input" type="checkbox" id="check12" name="47">
            <label class="form-check-label" for="check12">
              วิทยุ
            </label>
            <div class="col">
              <input type="text" class="form-control" name="48">
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-check form-check-inline col-12 col-md-6 form-group">
            <input class="form-check-input" type="checkbox" id="check13" name="49">
            <label class="form-check-label" for="check13">
              หนังสือพิมพ์
            </label>
            <div class="col">
              <input type="text" class="form-control" name="50">
            </div>
          </div>
          <div class="form-check form-check-inline col-12 col-md form-group">
            <input class="form-check-input" type="checkbox" id="check14" name="51">
            <label class="form-check-label" for="check14">
              Facebook ค่ายเส้นทางสู่หมอศิริราชครั้งที่ 21
            </label>
          </div>
        </div>
        <div class="form-row">
          <div class="form-check form-check-inline col-12 col-md-6 form-group">
            <input class="form-check-input" type="checkbox" id="check15" name="52">
            <label class="form-check-label" for="check15">
              Website
            </label>
            <div class="col">
              <input type="text" class="form-control" name="53">
            </div>
          </div>
          <div class="form-check form-check-inline col-12 col-md form-group">
            <input class="form-check-input" type="checkbox" id="check16" name="54">
            <label class="form-check-label" for="check16">
              ผู้ปกครอง / รุ่นพี่ / เพื่อน
            </label>
          </div>
        </div>
        <div class="form-row">
          <div class="form-check form-check-inline col-12 col-md-6 form-group">
            <input class="form-check-input" type="checkbox" id="check17" name="55">
            <label class="form-check-label" for="check17">
              อื่น ๆ
            </label>
            <div class="col">
              <input type="text" class="form-control" name="56">
            </div>
          </div>
        </div>
        <div class="form-row">
          <label><b>คณะและมหาวิทยาลัยที่น้องจะเลือกศึกษาต่อในระดับอุดมศึกษา</b></label>
        </div>
        <div class="form-group row">
          <label for="in28" class="col-1 col-form-label">1. </label>
          <div class="col">
            <input type="text" class="form-control" id="in28" name="57" required>
          </div>
        </div>
        <div class="form-group row">
          <label for="in29" class="col-1 col-form-label">2. </label>
          <div class="col">
            <input type="text" class="form-control" id="in29" name="58">
          </div>
        </div>
        <div class="form-group row">
          <label for="in30" class="col-1 col-form-label">3. </label>
          <div class="col">
            <input type="text" class="form-control" id="in30" name="59">
          </div>
        </div>
        <div class="form-group row">
          <label for="in31" class="col-1 col-form-label">4. </label>
          <div class="col">
            <input type="text" class="form-control" id="in31" name="60">
          </div>
        </div>
        <div class="form-group">
          <label class="col-form-label">อัพโหลดไฟล์ใบอนุญาต *เป็นไฟล์รูปภาพขนาดไม่เกิน 5MB <u style="color: blue"><a href="https://drive.google.com/file/d/132O8QfGMnp-SHXrwi2K8RJmK-C5TAuJl/view?usp=sharing" target="_blank">download ใบขออนุญาติผู้ปกครองได้ที่นี่</a></u></label>
          <input type="file" class="form-control-file" name="61" id="61">
          <img style="display: none; max-width: 480px;" id="p61" src="#" alt="รูปประกอบไฟล์ใบอนุญาต" width="100%"/>
        </div>
        <div class="form-group">
          <label class="col-form-label">อัพโหลดไฟล์ ปพ. 7 *เป็นไฟล์รูปภาพขนาดไม่เกิน 5MB</label>
          <input type="file" class="form-control-file" name="62" id="62">
          <img style="display: none; max-width: 480px;" id="p62" src="#" alt="รูปประกอบไฟล์ ปพ.7" width="100%"/>
        </div>
        <button type="submit" class="btn btn-primary">บันทึกข้อมูล (สามารถกลับมาแก้ไขได้)</button>
      </form>
      <br>
    </div>
    <%- include('../includes/footer.ejs'); %>
    <script src="/profile-bundle.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/he/1.1.1/he.min.js" integrity="sha256-MK0aAxCgZEEnAT1M6Sb/t2x+LINmw/RJjkgAxMAWOeU=" crossorigin="anonymous"></script>
    <script type="text/javascript">
      function readURL(input, el) {

        if (input.files && input.files[0]) {
          var reader = new FileReader();

          reader.onload = function(e) {
            el.attr('src', e.target.result);
            el.css('display', '');
          }

          reader.readAsDataURL(input.files[0]);
        }
      };
      <%
        oldAnswer.forEach(e => {
          e.num = e.get('num');
          e.ans = e.get('ans');
          e.part = e.get('part');
          if(e.part != part) return ;
          if(text.has(e.num) || date.has(e.num)) { // text and date
      %>
      $('*[name=<%= e.num %>]')[0].value = he.decode('<%= e.ans %>');
      <%
          }
          else if(textarea.has(e.num)) { // textarea
      %>
      $('*[name=<%= e.num %>]').html('<%= e.ans.replace(/\r\n/g, "\\n") %>');
      <%
          }
          else if(radio.has(e.num)) { // radio
      %>
      $('*[name=<%= e.num %>][value="<%= e.ans %>"]').prop('checked', true).trigger('change');
      <%
          }
          else if(check.has(e.num) && e.ans == 'on') { // check
      %>
      $('*[name=<%= e.num %>]').prop('checked', true).trigger('change');
      <%
          }
          else if(select.has(e.num)) { // select
      %>
      $('*[name=<%= e.num %>] option[value="<%= e.ans %>"]').prop('selected', true);
      <%
          }
          else if(upload.has(e.num) && e.ans != '') { // upload
      %>
      $('#p' + <%= e.num %>)
        .attr('src', 'https://storage.googleapis.com/simc-web.appspot.com/' + '<%= e.ans %>')
        .css('display', '');
      <%
          }
        });
      %>
      $("#61").change(function() {
        readURL(this, $('#p61'));
      });
      $("#62").change(function() {
        readURL(this, $('#p62'));
      });
    </script>
  </body>